## Seekme Development Guide

### Design Standard

- Follow the friendly-python guidelines as the primary design standard.
- Prefer clarity and maintainability over micro-optimizations.

### Environment

- Python is managed with `uv`. Use `make install` to sync dependencies and install hooks.
- Tests and tooling should run via `uv run ...` or the Makefile targets.

### Local SeekDB (for e2e)

- Local SeekDB lives in `/home/coder/oceanbase/seekme`.
- Start: `uvx --from . seekme start`
- Stop: `uvx --from . seekme stop`
- Status: `uvx --from . seekme status`
- Check: `uvx --from . seekme check`

### Testing

- Unit and integration: `make test`
- Focused runs: `uv run pytest tests/test_vector_sql.py`
- E2E requires a running SeekDB instance (see Local SeekDB).

### Test Configuration

- Database env vars:
- `SEEKME_TEST_DB_MODE` (`remote` or `embedded`)
- `SEEKME_TEST_DB_URL` or `SEEKME_TEST_DB_HOST` / `SEEKME_TEST_DB_PORT` / `SEEKME_TEST_DB_USER` / `SEEKME_TEST_DB_PASSWORD`
- `SEEKME_TEST_DB_NAME`
- Embedding env vars:
- `SEEKME_TEST_REMOTE_EMBEDDING` and `SEEKME_TEST_REMOTE_API_KEY`
- `SEEKME_TEST_REMOTE_MODEL` / `SEEKME_TEST_REMOTE_API_BASE` / `SEEKME_TEST_REMOTE_PROVIDER`
- `SEEKME_TEST_LOCAL_EMBEDDING` and `SEEKME_TEST_LOCAL_MODEL`

### Code Quality

- `make check` runs lockfile validation, pre-commit, and type checks.
- `make docs-test` validates docs build.

### Release

- Build wheel: `make build`
- Publish: `make publish`

## Seekme Design Language (SDK)

### Core Principles

- One obvious way to do a task. Avoid parallel APIs with overlapping meaning.
- Make lifecycles explicit (create, use, delete). Avoid hidden state and implicit defaults.
- Keep entry points small and stable; advanced behavior should be opt-in.
- Prefer clear, local changes over clever abstractions.

### Vector Index Policy

- Lifecycle is explicit. `create_collection` creates only the table.
- Indexes are created and deleted via `create_vector_index` / `delete_vector_index`.
- Distance is explicit. `search` always requires `distance`. Never infer or persist it.
- Index config is explicit. All fields must be provided in `VectorIndexConfig`. Do not introduce hidden defaults.
- No implicit state. Do not rely on in-memory caches to infer index settings.

### API Shape

- Prefer single, canonical parameter shapes. Do not accept both dicts and typed params for the same concept.
- Keep configuration in small, explicit dataclasses; avoid builder patterns.
- Surface validation errors early, with clear error messages.

### SQL Alignment

- Keep SQL generated by the SDK close to real SQL concepts (tables, indexes, DDL).
- Avoid magical transformations of user inputs; validate identifiers and keep changes localized.
